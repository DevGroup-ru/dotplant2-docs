# Отслеживание расширенной электронной торговли

> Данное руководство написанно для ветки *filters*

В DotPlant2 реализовано отслеживание расширенной электронной торговли от [Yandex](https://www.yandex.ru/support/metrika/data/e-commerce.xml) и [Google](https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce) при помощи счетчиков.

Для того чтобы запустить отслеживание необходимо в настройках админки в разделе SEO активировать `Google ecommerce` и `Yandex ecommerce`, а так же, в мультивалютных сайтах, валюту. После этого необходимо отредактировать счетчики в соответствии с руководством и включить отслеживание в метрике и аналитике.

Отслеживаются следующие события:

* Просмотр товара
* Добавление товара в корзину
* Удаление товара из корзины
* Покупка

Так же в Google analytics возможно отслеживание процесса оформления покупки. Для реализации отслеживания добавьте следующий код в представления соответствующие шагам оформления заказа:

```php
$this->registerJS("ga('ec:setAction','checkout', {
    'step': X, 

});
ga('send', 'pageview'); ");
```

где X - номер шага при оформлении заказа.